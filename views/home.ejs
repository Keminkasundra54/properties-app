<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Table Filter</title>
<link rel="stylesheet" type="text/css" href="/static/style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="/static/js/main.js"></script>
<script>
  $(document).on('submit', 'form.propertyForm', function(e) {
  e.preventDefault();
  var data = getFormData($('form.propertyForm'));
  data['userId'] = 1;
  let idToUpdate = data._id;
  if (idToUpdate) {

  } else {
    delete data._id;
  }


  $.ajax({
    url: idToUpdate ? "/api/property/update" : "/api/property/create",
    method: 'post',
    data: JSON.stringify(data),
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function(result){
      // location.reload();
    }
  });
})
function getFormData($form){
  var unindexed_array = $form.serializeArray();
  var indexed_array = {};

  $.map(unindexed_array, function(n, i){
      indexed_array[n['name']] = n['value'];
  });

  return indexed_array;
}
</script>
</head>
	<body>
		<section class="filter-sec">
			<div class="wrapper">
				<div class="filter-secInr">
					<div class="filter-row">
						<div class="filter-rowINr flex flex-wrap">
							<div class="ls-filter">
								<div class="filter-list">
									<div class="filter-listInr">
										<label class="filter-search">All Department</label>
										<ul>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
										</ul>
									</div>
								</div>
								<div class="filter-list">
									<div class="filter-listInr">
										<label class="filter-search">All Department</label>
										<ul>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
											<li>
												<span>lorem ispum</span>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="rs-filter">
								<div class="prperty-btn popupButton button">
									<a href="#popupButton"> Add Property</a>
								</div>
							</div>
						</div>
					</div>
					<div class="table-row">
						<div class="table-rowINr">
							<table width="100%" cellpadding="0" cellspacing="0" style="text-align: left;">
								<thead>
									<tr>
										<th>
											<input type="checkbox" name="Select All" value="Select All">
										</th>
										<th>
											Image
										</th>
										<th>
											Adress
										</th>
										<th>
											Price
										</th>
										<th>
											Marketing Status
										</th>
										<th>
											Owner / Landlord
										</th>
										<th>
											Neg / Office
										</th>
										<th>
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="12px" height="16px" viewBox="0 0 12 16" enable-background="new 0 0 12 16" xml:space="preserve"><path d="M2,0C0.9,0,0,0.9,0,2v12c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V5H8C7.4,5,7,4.6,7,4V0H2z M8,0v4h4L8,0z M6.8,12.8  c0,0.4-0.3,0.8-0.8,0.8s-0.8-0.3-0.8-0.8V9.6l-1,1c-0.3,0.3-0.8,0.3-1.1,0s-0.3-0.8,0-1.1l2.3-2.2c0.3-0.3,0.8-0.3,1.1,0l2.2,2.2  c0.3,0.3,0.3,0.8,0,1.1s-0.8,0.3-1.1,0l-1-1L6.8,12.8L6.8,12.8z"/></svg>
										</th>
										<th>
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="12px" height="16px" viewBox="0 0 12 16" enable-background="new 0 0 12 16" xml:space="preserve"><path d="M8,5C7.4,5,7,4.5,7,4V0H2C0.9,0,0,0.9,0,2v12c0,1.1,0.9,2,2,2h8c1.1,0,2-0.9,2-2V5H8z M8.8,10.5l-2.2,2.2  c-0.3,0.3-0.8,0.3-1.1,0l-2.2-2.2c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0l1,1V7.2c0-0.4,0.3-0.8,0.8-0.8s0.8,0.3,0.8,0.8v3.2  l1-1c0.3-0.3,0.8-0.3,1.1,0C9.1,9.8,9.1,10.2,8.8,10.5z M8,0v4h4L8,0z"/></svg>
										</th>
										<th>
											Let Type
										</th>
										<th>
											Minimum Tenancy
										</th>
										<th>
											Buttons
										</th>
									</tr>
								</thead>
								<tbody>
                  <% properties.forEach((item)=>{%>
                    <tr>
                      <td>
                        <input type="checkbox" name="Select All" value="Select All">
                      </td>
                      <td>
                        <img src="/static/Images/dummy.jpg" alt="Table-img" width="50" height="50" loading="lazy">
                      </td>
                      <td>
                        <%- item['address'] %>
                      </td>
                      <td>
                        $ <%- item.price %>

                      </td>
                      <td>
                        <%- item.marketingStatus %>
                      </td>
                      <td>
                        <%- item.owner %>
                      </td>
                      <td>
                        Rachel Thorntone <br>
                        Oakton Estates
                      </td>
                      <td>
                        0
                      </td>
                      <td>
                        0
                      </td>
                      <td>
                        <%- item.letType %>
                      </td>
                      <td>
                        <%- item.minimumeTenancy %> Months
                      </td>
                      <td>
                        <div class="buttonBox flex flex-wrap">
                          <div class="popupButton button">
                            <a href="#popupBox" data-id="<%- item._id %>">
                              Edit
                            </a>
                          </div>
                          <!-- <div class="button">
                            <a href="#">
                              Remove
                            </a>
                          </div> -->
                        </div>
                      </td>
                    </tr>
                    <%});%>



								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="popupSec" id="popupBox">
				<div class="popupsecinr">
					<div class="popupBoxs">
						<div class="closeBTn">
							<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path d="M23 20.168l-8.185-8.187 8.185-8.174-2.832-2.807-8.182 8.179-8.176-8.179-2.81 2.81 8.186 8.196-8.186 8.184 2.81 2.81 8.203-8.192 8.18 8.192z"/></svg>
						</div>
						<div class="popupItem">
							<form class="propertyForm">


								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="price" placeholder="Price">
									</div>
								</fieldset>
								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="marketingStatus" placeholder="Marketing Status">
									</div>
								</fieldset>
								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="owner" placeholder="Owner / Landlord">
									</div>
								</fieldset>
								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="letType" placeholder="Let Type">
									</div>
								</fieldset>
								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="minimumeTenancy" placeholder="Minimum Tenancy">
									</div>
								</fieldset>
                <fieldset class="fieldset-onecolumn" style="display: none;">
									<div class="form-field">
										<input type="text" name="_id" placeholder="Minimum Tenancy">
									</div>
								</fieldset>
								<fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="text" name="address" placeholder="Address">
									</div>
								</fieldset>
								<!-- <fieldset class="fieldset-onecolumn">
									<div class="form-field">
										<input type="file" name="myImage" accept="image/png, image/gif, image/jpeg" />
									</div>
								</fieldset> -->
								<div class="submit-btn">
									<input type="submit" value="Submit">
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</section>
	</body>
</html>



